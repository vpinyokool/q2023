(function(e){e.fn.twentytwenty=function(t){var t=e.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Before",after_label:"After",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1},t);return this.each(function(){var s,i,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,a=t.default_offset_pct,n=e(this),o=t.orientation,O=o==="vertical"?"down":"left",w=o==="vertical"?"up":"right";n.wrap("<div class='twentytwenty-wrapper twentytwenty-"+o+"'></div>"),t.no_overlay||(n.append("<div class='twentytwenty-overlay'></div>"),f=n.find(".twentytwenty-overlay"),f.append("<div class='twentytwenty-before-label' data-content='"+t.before_label+"'></div>"),f.append("<div class='twentytwenty-after-label' data-content='"+t.after_label+"'></div>")),s=n.find("img:first"),d=n.find("img:last"),n.append("<div class='twentytwenty-handle'></div>"),i=n.find(".twentytwenty-handle"),i.append("<span class='twentytwenty-"+O+"-arrow'></span>"),i.append("<span class='twentytwenty-"+w+"-arrow'></span>"),n.addClass("twentytwenty-container"),s.addClass("twentytwenty-before"),d.addClass("twentytwenty-after"),_=function(e){var t=s.width(),n=s.height();return{w:t+"px",h:n+"px",cw:e*t+"px",ch:e*n+"px"}},y=function(e){o==="vertical"?(s.css("clip","rect(0,"+e.w+","+e.ch+",0)"),d.css("clip","rect("+e.ch+","+e.w+","+e.h+",0)")):(s.css("clip","rect(0,"+e.cw+","+e.h+",0)"),d.css("clip","rect(0,"+e.w+","+e.h+","+e.cw+")")),n.css("height",e.h)},m=function(e){var t=_(e);i.css(o==="vertical"?"top":"left",o==="vertical"?t.ch:t.cw),y(t)},j=function(e,t,n){return Math.max(t,Math.min(n,e))},p=function(e,t){var n=o==="vertical"?(t-h)/l:(e-r)/u;return j(n,0,1)},e(window).on("resize.twentytwenty",function(){m(a)}),r=0,h=0,u=0,l=0,g=function(e){(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&o!=="vertical"?e.preventDefault():(e.distX<e.distY&&e.distX<-e.distY||e.distX>e.distY&&e.distX>-e.distY)&&o==="vertical"&&e.preventDefault(),n.addClass("active"),r=n.offset().left,h=n.offset().top,u=s.width(),l=s.height()},v=function(e){n.hasClass("active")&&(a=p(e.pageX,e.pageY),m(a))},b=function(){n.removeClass("active")},c=t.move_with_handle_only?i:n,c.on("movestart",g),c.on("move",v),c.on("moveend",b),t.move_slider_on_hover&&(n.on("mouseenter",g),n.on("mousemove",v),n.on("mouseleave",b)),i.on("touchmove",function(e){e.preventDefault()}),n.find("img").on("mousedown",function(e){e.preventDefault()}),t.click_to_move&&n.on("click",function(e){r=n.offset().left,h=n.offset().top,u=s.width(),l=s.height(),a=p(e.pageX,e.pageY),m(a)}),e(window).trigger("resize.twentytwenty")})}})(jQuery)